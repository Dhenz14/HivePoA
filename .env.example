# ============================================================
# HivePoA (SPK Network 2.0) - Environment Configuration
# ============================================================
# Copy this file to .env and fill in the values.
# Services fall back to simulation/mock mode when keys are missing.

# ============================================================
# REQUIRED
# ============================================================

# PostgreSQL connection string (e.g., Neon serverless)
DATABASE_URL=postgresql://user:password@host:5432/dbname

# ============================================================
# HIVE BLOCKCHAIN
# Without these, all blockchain operations use MockHiveClient
# (transfers, reputation, custom_json are simulated)
# ============================================================

# Your Hive account username
HIVE_USERNAME=your-witness-account

# Hive posting key (enables custom_json broadcasts: PoA results, reputation updates)
HIVE_POSTING_KEY=5K...

# Hive active key (enables HBD transfers for payout execution)
HIVE_ACTIVE_KEY=5K...

# ============================================================
# IPFS
# The IPFS daemon auto-starts and sets IPFS_API_URL automatically.
# Only set these if you want to use an external IPFS node.
# Without a running IPFS node, file operations use MockIPFSClient.
# ============================================================

# IPFS HTTP API endpoint (auto-set if local daemon starts)
# IPFS_API_URL=http://127.0.0.1:5001

# IPFS repository path (default: .ipfs-data)
# IPFS_PATH=.ipfs-data

# IPFS ports (defaults: API=5001, Gateway=8081, Swarm=4001)
# IPFS_API_PORT=5001
# IPFS_GATEWAY_PORT=8081
# IPFS_SWARM_PORT=4001

# Run IPFS in offline mode (no peer connections)
# IPFS_OFFLINE=false

# ============================================================
# SPK NETWORK (PoA VALIDATION)
# Without SPK_POA_URL, the PoA engine runs in simulation mode
# (challenges are simulated with ~85% success rate)
# ============================================================

# SPK PoA node WebSocket endpoint (enables live validation)
# SPK_POA_URL=http://spk-node:3000

# ============================================================
# ENCODING
# ============================================================

# Webhook secret for encoding job callbacks (HMAC-SHA256 signing)
# ENCODING_WEBHOOK_SECRET=your-webhook-secret

# ============================================================
# SERVER
# ============================================================

# Server port (default: 5000)
PORT=5000

# Node environment (development/production)
# Controls PoA timing, logging verbosity, and Vite dev server
NODE_ENV=development

# Logging level (trace, debug, info, warn, error, fatal)
# Default: "info" in production, "debug" in development
# LOG_LEVEL=info

# ============================================================
# POA ENGINE TUNING (optional, has smart defaults)
# Production defaults are used when NODE_ENV=production
# ============================================================

# Challenge interval in ms (dev: 30000, prod: 1800000 = 30 min)
# POA_CHALLENGE_INTERVAL_MS=1800000

# Node cooldown in ms (dev: 30000, prod: 1800000 = 30 min)
# POA_NODE_COOLDOWN_MS=1800000

# Node+file cooldown in ms (dev: 60000, prod: 14400000 = 4 hours)
# POA_NODE_FILE_COOLDOWN_MS=14400000

# ============================================================
# PLATFORM (auto-detected on Replit)
# ============================================================

# Replit slug (auto-set by Replit, used for webhook callback URLs)
# REPL_SLUG=your-repl-slug

# GitHub token (for desktop agent release publishing)
# GITHUB_TOKEN=ghp_...
